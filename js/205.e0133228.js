"use strict";(self["webpackChunkvue_stock_web"]=self["webpackChunkvue_stock_web"]||[]).push([[205],{9205:function(e,t,s){s.r(t),s.d(t,{default:function(){return I}});var o=s(3396),n=s(3233),i=s(7156);const l=e=>((0,o.dD)("data-v-710a549b"),e=e(),(0,o.Cn)(),e),d={class:"member-password"},c={class:"form-section pos-relative"},a=l((()=>(0,o._)("p",{class:"title fw-700"},"更改密碼",-1))),r={class:"form choose-select"},u=l((()=>(0,o._)("label",{for:"editOldPwd",class:"colLabel"},"舊密碼",-1))),w={class:"formBox d-flex flex-direction-column"},p=l((()=>(0,o._)("label",{for:"editNewPwd",class:"colLabel"},"新密碼",-1))),h=l((()=>(0,o._)("label",{for:"editCheckPwd",class:"colLabel"},"確認新密碼",-1))),m={class:"d-flex mt-5 justify-content-end"},f=l((()=>(0,o._)("span",null,"取消變更",-1))),k=[f],b=l((()=>(0,o._)("button",{type:"submit",class:"btn d-block text-align-center"},[(0,o._)("span",null,"儲存變更")],-1)));function P(e,t,s,l,f,P){return(0,o.wg)(),(0,o.iD)("div",d,[(0,o._)("div",c,[a,(0,o._)("form",{action:"member-form",autocomplete:"off",class:"position-relative",onSubmit:t[13]||(t[13]=(0,n.iM)(((...e)=>P.clickStoreBtn&&P.clickStoreBtn(...e)),["prevent"]))},[(0,o._)("div",r,[(0,o._)("div",{class:(0,i.C_)([{redTip:f.isShowOldTip},"formBox d-flex flex-direction-column"])},[u,(0,o.wy)((0,o._)("input",{id:"editOldPwd","onUpdate:modelValue":t[0]||(t[0]=e=>f.oldPwd=e),type:"password",maxlength:"10",autoComplete:"off",placeholder:"請輸入舊密碼",class:"form-control",required:"",onKeydown:t[1]||(t[1]=e=>P.keydownNull(e)),onFocus:t[2]||(t[2]=(...e)=>P.focusInputFn&&P.focusInputFn(...e)),onBlur:t[3]||(t[3]=(...e)=>P.blurInputFn&&P.blurInputFn(...e))},null,544),[[n.nr,f.oldPwd]])],2),f.isShowOldTip?((0,o.wg)(),(0,o.iD)("p",{key:0,class:(0,i.C_)([{redTip:f.isShowOldTip},"tip"])},"*舊密碼輸入錯誤",2)):(0,o.kq)("",!0),(0,o._)("div",w,[p,(0,o.wy)((0,o._)("input",{id:"newPwd","onUpdate:modelValue":t[4]||(t[4]=e=>f.newPwd=e),type:"password",minlength:"5",maxlength:"10",autoComplete:"off",placeholder:"請輸入至少5個字元",class:"form-control",required:"",onKeydown:t[5]||(t[5]=e=>P.keydownNull(e)),onFocus:t[6]||(t[6]=(...e)=>P.focusInputFn&&P.focusInputFn(...e)),onBlur:t[7]||(t[7]=(...e)=>P.blurInputFn&&P.blurInputFn(...e))},null,544),[[n.nr,f.newPwd]])]),(0,o._)("div",{class:(0,i.C_)([{redTip:f.isShowNewTip},"formBox d-flex flex-direction-column"])},[h,(0,o.wy)((0,o._)("input",{id:"checkNewPwd","onUpdate:modelValue":t[8]||(t[8]=e=>f.checkPwd=e),type:"password",maxlength:"10",autoComplete:"off",placeholder:"請重複輸入新密碼",class:"form-control",required:"",onKeydown:t[9]||(t[9]=e=>P.keydownNull(e)),onFocus:t[10]||(t[10]=(...e)=>P.focusInputFn&&P.focusInputFn(...e)),onBlur:t[11]||(t[11]=(...e)=>P.blurInputFn&&P.blurInputFn(...e))},null,544),[[n.nr,f.checkPwd]])],2),f.isShowNewTip?((0,o.wg)(),(0,o.iD)("p",{key:1,class:(0,i.C_)([{redTip:f.isShowNewTip},"tip"])},"*新密碼重複輸入錯誤",2)):(0,o.kq)("",!0)]),(0,o._)("div",m,[(0,o._)("a",{class:"btn cancel d-flex justify-content-center align-items-center main-blue-text",onClick:t[12]||(t[12]=(...e)=>P.clickCancelBtn&&P.clickCancelBtn(...e))},k),b])],32)])])}var _=s(4706);const{cookies:F}=(0,_.fP)();var S={data(){return{oldPwd:"",newPwd:"",checkPwd:"",isShowOldTip:!1,isShowNewTip:!1}},computed:{currentPwd(){return this.$store.state.memberPassword},memberId(){return this.$store.state.memberId}},unmounted(){this.clickCancelBtn()},methods:{clickStoreBtn(){if(this.resetTip(),this.oldPwd!==this.currentPwd)return this.isShowOldTip=!0,void this.showFalseAnim();if(this.newPwd!==this.checkPwd)return this.isShowNewTip=!0,void this.showFalseAnim();this.$store.dispatch("updateIsShowLoading",0);const e="/chaliu/UpdateMemberPWD";this.axios.post(e,{MID:this.memberId,newPassword:this.newPwd}).then((e=>{this.$store.dispatch("updateIsShowLoading",1);const t=e.data;"success"===t.status?this.updatePwdSucFn():this.showFalseAnim()})).catch((function(e){console.log("error",e)}))},updatePwdSucFn(){this.$store.dispatch("updateMemberPassword",this.newPwd),F.set("pwd",this.newPwd,"6h"),this.clickCancelBtn(),this.$store.dispatch("updateIsShowNotice",!0),this.$store.dispatch("updateNoticeText","密碼修改成功")},showFalseAnim(){$(".message").addClass("animate_headShake"),$(".message").on("webkitAnimationEnd",(function(){$(".message").removeClass("animate_headShake")}))},resetTip(){this.isShowOldTip=!1,this.isShowNewTip=!1},clickCancelBtn(){this.oldPwd="",this.newPwd="",this.checkPwd="",this.resetTip()},focusInputFn(e){$(e.target).closest(".formBox").addClass("inputFocus")},blurInputFn(e){$(e.target).closest(".formBox").removeClass("inputFocus")},keydownNull(e){32==e.keyCode&&(e.returnValue=!1)}}},v=s(89);const C=(0,v.Z)(S,[["render",P],["__scopeId","data-v-710a549b"]]);var I=C}}]);
//# sourceMappingURL=205.e0133228.js.map