"use strict";(self["webpackChunkvue_stock_web"]=self["webpackChunkvue_stock_web"]||[]).push([[698],{8698:function(e,s,t){t.r(s),t.d(s,{default:function(){return J}});var a=t(3396),o=t(7156);const i=e=>((0,a.dD)("data-v-4b9bf372"),e=e(),(0,a.Cn)(),e),l={class:"member-reserve"},c=i((()=>(0,a._)("h1",{class:"title"},"會員訂位紀錄",-1))),n={class:"shopSelect d-flex justify-content-end align-items-center"},r={class:"select-flex d-flex align-items-center"},d=i((()=>(0,a._)("p",{class:"selectTitle fw-700"},"分店",-1))),h=["onClick"],p={class:"select-flex d-flex align-items-center"},m=i((()=>(0,a._)("p",{class:"selectTitle fw-700"},"日期",-1))),u=["onClick"],w=["onClick"],O=["onClick"],b={class:"shop"},f={class:"name"},g={class:"fw-700 data d-flex mb-1"},S=i((()=>(0,a._)("span",{class:"mr-2"},"訂位者:",-1))),k={class:"fw-700 data d-flex mb-1"},D=i((()=>(0,a._)("span",{class:"mr-2"},"手機號碼:",-1))),v={class:"fw-700 data d-flex mb-1"},_={class:"mr-2"},C=i((()=>(0,a._)("span",null,null,-1))),x={class:"d-flex time-block"},N={class:"mr-2 d-block"},j={class:"d-block"},B={class:"fw-700 data d-flex mb-1"},y=i((()=>(0,a._)("span",{class:"mr-2"},"預定人數:",-1))),z={key:0,class:"align-self-end main-white-888"},I={key:1,class:"w-100 d-flex btn-list justify-content-end"},T=i((()=>(0,a._)("button",{class:"borderBtn active"},"預約中",-1))),W=["onClick"],R=["onClick"],L={key:2,class:"statusTxt fw-700"},K={class:"d-flex justify-content-center"},Y={key:0,class:"noOrder"},q=i((()=>(0,a._)("p",{class:"icon-calendar text-align-center"},null,-1))),H=i((()=>(0,a._)("p",{class:"txt fw-700 text-align-center"},"目前無任何紀錄",-1))),E=[q,H];function U(e,s,t,i,$,q){return(0,a.wg)(),(0,a.iD)("div",l,[c,(0,a._)("div",n,[(0,a._)("div",r,[d,(0,a._)("div",{class:"shop-custom-select",tabindex:"0",onBlur:s[1]||(s[1]=e=>$.isOpenShopSelect=!1)},[(0,a._)("div",{class:"selected icon-right-open fw-700",onClick:s[0]||(s[0]=e=>$.isOpenShopSelect=!$.isOpenShopSelect)},(0,o.zw)($.selectShop),1),(0,a._)("div",{class:(0,o.C_)(["items",{selectHide:!$.isOpenShopSelect}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($.shopPointData,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{key:s,class:(0,o.C_)(["item fw-700 d-flex",{selectPick:q.selectSameOption($.selectShop,e.shopName)}]),onClick:s=>q.clickShopSelect(e)},(0,o.zw)(e.shopName),11,h)))),128))],2)],32)]),(0,a._)("div",p,[m,(0,a._)("div",{class:"shop-custom-select date-custom-select",tabindex:"0",onBlur:s[3]||(s[3]=e=>$.isOpenDateSelect=!1)},[(0,a._)("div",{class:"selected icon-right-open fw-700",onClick:s[2]||(s[2]=e=>$.isOpenDateSelect=!$.isOpenDateSelect)},(0,o.zw)($.selectDate),1),(0,a._)("div",{class:(0,o.C_)(["items",{selectHide:!$.isOpenDateSelect}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.ordersDate,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{key:s,class:(0,o.C_)(["item fw-700 d-flex",{selectPick:q.selectSameOption($.selectDate,e)}]),onClick:s=>q.clickDateSelect(e)},(0,o.zw)(e),11,u)))),128))],2)],32)])]),(0,a._)("div",{class:"d-flex mb-3",onClick:s[4]||(s[4]=e=>{q.goTop()})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($.statusObj,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{key:s,class:(0,o.C_)([{active:$.statusObj[s].statusBool},"choose"]),onClick:t=>{q.resetChoose(e,s),q.clickChooseType(s)}},(0,o.zw)(e.statusName),11,w)))),128))]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($.newMemberReseveData,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{key:s,class:"order"},[$.statusObj.isShowNowOrder.statusBool?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:"btn-close",onClick:s=>q.clickDeleteBtn(e.OID)},null,8,O)),(0,a._)("div",b,[(0,a._)("p",f,"茶六燒肉堂 - "+(0,o.zw)(e.shopName),1)]),(0,a._)("p",g,[(0,a._)("span",{class:(0,o.C_)([{"main-brow-text":$.statusObj.isShowNowOrder.statusBool},"icon-dot"])},null,2),S,(0,a._)("span",null,(0,o.zw)(e.memberName),1)]),(0,a._)("p",k,[(0,a._)("span",{class:(0,o.C_)([{"main-brow-text":$.statusObj.isShowNowOrder.statusBool},"icon-dot"])},null,2),D,(0,a._)("span",null,(0,o.zw)(e.cellphone),1)]),(0,a._)("div",v,[(0,a._)("p",_,[(0,a._)("span",{class:(0,o.C_)([{"main-brow-text":$.statusObj.isShowNowOrder.statusBool},"icon-dot"])},null,2),C,(0,a.Uk)("預定時間: ")]),(0,a._)("p",x,[(0,a._)("span",N,(0,o.zw)(e.date),1),(0,a._)("span",j,(0,o.zw)(e.time),1)])]),(0,a._)("p",B,[(0,a._)("span",{class:(0,o.C_)([{"main-brow-text":$.statusObj.isShowNowOrder.statusBool},"icon-dot"])},null,2),y,(0,a._)("span",null,(0,o.zw)(e.people)+"人",1)]),(0,a._)("div",{class:(0,o.C_)([[{orderStatus:!$.statusObj.isShowNowOrder.statusBool},{"mt-4":$.statusObj.isShowNowOrder.statusBool}],"d-flex justify-content-bewteen"])},[$.statusObj.isShowNowOrder.statusBool?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",z,"於 "+(0,o.zw)(e.bookDate)+" 預約",1)),$.statusObj.isShowNowOrder.statusBool?((0,a.wg)(),(0,a.iD)("div",I,[T,(0,a._)("button",{class:"borderBtn",onClick:s=>q.clickOverBtn(e.OID)},"已用餐",8,W),(0,a._)("button",{class:"borderBtn",onClick:s=>q.clickCancelBtn(e.OID)},"取消",8,R)])):(0,a.kq)("",!0),$.statusObj.isShowNowOrder.statusBool?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",L,(0,o.zw)(e.status),1))],2)])))),128)),(0,a._)("div",K,[$.newMemberReseveData.length>1?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"goTop transition-0-3 icon-left-open",onClick:s[5]||(s[5]=(...e)=>q.goTopScroll&&q.goTopScroll(...e))})):(0,a.kq)("",!0)]),0===$.newMemberReseveData.length?((0,a.wg)(),(0,a.iD)("div",Y,E)):(0,a.kq)("",!0)])}t(7658);var A=t(1991),M={data(){return{memberReseveData:[],newMemberReseveData:[],shopPointData:A.R,statusObj:{isShowNowOrder:{statusName:"訂位中",statusBool:!0},isShowOverOrder:{statusName:"已用餐",statusBool:!1},isShowCancelOrder:{statusName:"已取消",statusBool:!1}},selectShop:A.R[0].shopName,isOpenShopSelect:!1,selectDate:"所有日期",isOpenDateSelect:!1,isLoadingOver:!1}},computed:{ordersDate(){const e=[],s="所有日期";return this.memberReseveData.forEach((s=>{-1===e.indexOf(s.date)&&this.selectShop===s.shopName&&Object.keys(this.statusObj).forEach((t=>{this.statusObj[t].statusBool&&s.status===this.statusObj[t].statusName&&e.push(s.date)}))})),e.sort(((e,s)=>e.localeCompare(s))).unshift(s),e},selectSameOption(){return function(e,s){return e===s}}},created(){this.getShopOrderData()},methods:{orders(){const e=[];this.memberReseveData.forEach((s=>{this.selectShop!==s.shopName||"所有日期"!==this.selectDate&&this.selectDate!==s.date||Object.keys(this.statusObj).forEach((t=>{this.statusObj[t].statusBool&&s.status===this.statusObj[t].statusName&&e.push(s)}))})),this.statusObj.isShowNowOrder.statusBool?e.sort(((e,s)=>e.date.localeCompare(s.date)||e.time.localeCompare(s.time))):e.sort(((e,s)=>s.date.localeCompare(e.date)||s.time.localeCompare(e.time))),this.newMemberReseveData=e},resetChoose(){Object.keys(this.statusObj).forEach((e=>{this.statusObj[e].statusBool=!1})),this.selectDate="所有日期"},clickChooseType(e){this.statusObj[e].statusBool=!0,this.getShopOrderData()},clickShopSelect(e){this.selectShop=e.shopName,this.selectDate="所有日期",this.isOpenShopSelect=!1,this.getShopOrderData()},clickDateSelect(e){this.selectDate=e,this.isOpenDateSelect=!1,this.getShopOrderData()},clickCancelBtn(e){this.updateOrderStatusFn(e,"已取消"),this.$store.dispatch("updateNoticeText","取消預約成功")},clickOverBtn(e){this.updateOrderStatusFn(e,"已用餐"),this.$store.dispatch("updateNoticeText","已用餐成功")},clickDeleteBtn(e){this.$store.dispatch("updateIsShowLoading",0);const s="/chaliu/DeleteOrder";this.axios.post(s,{OID:e}).then((e=>{this.$store.dispatch("updateIsShowLoading",1),this.isLoadingOver=!0,this.getShopOrderData(),this.$store.dispatch("updateNoticeText","紀錄刪除成功"),this.$store.dispatch("updateIsShowNotice",!0)})).catch((function(e){console.log("error",e)}))},updateOrderStatusFn(e,s){this.$store.dispatch("updateIsShowLoading",0);const t="/chaliu/UpdateOrderStatus";this.axios.post(t,{OID:e,newStatus:s}).then((e=>{this.$store.dispatch("updateIsShowLoading",1),this.isLoadingOver=!0,this.getShopOrderData(),this.$store.dispatch("updateIsShowNotice",!0)})).catch((function(e){console.log("error",e)}))},goTop(){$("html,body").scrollTop(0,0)},goTopScroll(){$("html,body").animate({scrollTop:0},"slow")},getShopOrderData(){this.isLoadingOver||this.$store.dispatch("updateIsShowLoading",0);const e="/chaliu/QueryShopOrderInfo";this.axios.post(e,{shopName:this.selectShop}).then((e=>{this.$store.dispatch("updateIsShowLoading",3),this.isLoadingOver=!1;const s=e.data;"success"===s.status?this.memberReseveData=s.result:this.memberReseveData=[],this.orders()})).catch((function(e){console.log("error",e)}))}}},P=t(89);const F=(0,P.Z)(M,[["render",U],["__scopeId","data-v-4b9bf372"]]);var J=F},1991:function(e){e.exports=JSON.parse('{"R":[{"id":0,"shopName":"台中中清店","address":"台中市北屯區中清路二段1037號","phone":"04-2425-1138","img":"./static/images/point/01.jpg","mapUrl":"https://goo.gl/maps/8EbkeXnRYWrXgHqGA","mapIframe":"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3639.4690367316184!2d120.65891531494152!3d24.19034728437427!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34691702e42a5169%3A0x460036a9f9dc10f7!2z6Iy25YWt54eS6IKJ5aCCKOS4rea4heW6lyk!5e0!3m2!1szh-TW!2stw!4v1644389873270!5m2!1szh-TW!2stw"},{"id":1,"shopName":"台中朝富店","address":"台中市西屯區朝富路258號","phone":"04-2258-7126","img":"./static/images/point/02.jpg","mapUrl":"https://goo.gl/maps/1UFa9DETffvibN5d9","mapIframe":"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3640.2446789498863!2d120.63302601494105!3d24.16315028438757!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34693df1c46ae6e1%3A0xc1644740de8180d!2z6Iy25YWt54eS6IKJ5aCCKOacneWvjOW6lyk!5e0!3m2!1szh-TW!2stw!4v1644393145354!5m2!1szh-TW!2stw"},{"id":2,"shopName":"台中公益店","address":"台中市西區公益路268號","phone":"04-2328-1167","img":"./static/images/point/03.jpg","mapUrl":"https://goo.gl/maps/L8Bn64HWePWfRt2u8","mapIframe":"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3640.5905257819572!2d120.65218801494088!3d24.15101428439345!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34693dd8423caa27%3A0x8641159ba314f374!2z6Iy25YWt54eS6IKJ5aCC5YWs55uK5bqX!5e0!3m2!1szh-TW!2stw!4v1644393211214!5m2!1szh-TW!2stw"},{"id":3,"shopName":"高雄博愛店","address":"高雄市左營區博愛二路238號","phone":"07-5566657","img":"./static/images/point/04.jpg","mapUrl":"https://goo.gl/maps/AwCfzMePdKwmQmsa9","mapIframe":"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3681.807993328034!2d120.30115371491242!3d22.660946385137358!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x346e05022a8011d5%3A0xa563d2828127f1c2!2z6Iy25YWt!5e0!3m2!1szh-TW!2stw!4v1644393260072!5m2!1szh-TW!2stw"}]}')}}]);
//# sourceMappingURL=698.4a8934fa.js.map